##Step 1:
UPDATE wiringPi
cd /tmp
wget https://project-downloads.drogon.net/wiringpi-latest.deb
sudo dpkg -i wiringpi-latest.deb

##Step 2:
You will next, install ncurses
sudo apt-get install ncurses-dev

##Step 3:
INSTALLING FFTW3
install fftw3 from the tarball downloaded from www.fftw.org, follow
the instructions for the config, make.  run make install as sudo

You have to run the same process once more for installation of the single
precision float library.

./configure --enable-float
make
sudo make install



##Step 3:
sudo apt-get install libasound2-dev
sudo apt-get install libgtk-3-dev
sudo apt-get install libgtk+-3-dev

##Step 4:
INSTALLING LOOPBACK
The snd-aloop will add three 'virtual sound cards' to the system
enable=1,1,1 enables all the three and these three cards are numbered 1,2,3.
This way there are a total of 4 cards: card 0 is the actual circuit audio circuit
and three virtual cards.
All cards under Linux are refered to like "hw:1,0", where, the first of the two
digits represents the card number, and the second digit is called a 'device'.
In the loopback what you play to "hw:1,0" will be avaiable to be recorded at "hw::1,1"

When need to connect an external program, let's say wsjt-x to sbitx, the sbitx will play
the audio to the speaker (hw:0,0) as well as hw:1,0. The wsjtx-x will capture this using 
hw:1,1 as the audio capture device. Note that the hw:1,0 and hw:1,1 are working as a pair.
To pick up the modulating audio generated by wsjtx (or other external programs), the playback 
device of the external program should be set to hw:2,0 and the sbitx will capture back the 
transmitting audio from hw:2,1. Again, hw:2,0 and hw:2,1 are operating as second pair.

			SBITX Audio              WSJT-X Audio
			hw:0,0 -> Speaker
			hw:0,0 <- Mic
			
			hw:1,0 -> Line out ----> hw:1,1 Mic In / Capture
			hw:2,1 <- Line In ------ hw:2,0 Speaker

To install loopback, you have to run this command from the command line:

	sudo modprobe snd-aloop enable=1,1,1 index=1,2,3

You have to do it just once after booting up. You can check that the three loopback devices 
are working by running the command :

	aplay -l

The sbitx will not work if the loopback is not present. 

Easy way to do that will be to add the below line to /etc/rc.local 

  sudo modprobe snd-aloop enable=1,1,1 index=1,2,3 
##Step 5:

CONFIGURING SOUND

add these lines to the /boot/config.txt

gpio=4,17,27,22,10,9,11,5,6,13,26,16,12,7,8,25,24=ip,pu
gpio=24,23=op,pu

#Disable under-voltage warning
avoid_warnings=1
sudo apt remove lxplug-ptbatt

# Enable audio (loads snd_bcm2835)
#dtparam=audio=on
dtoverlay=audioinjector-wm8731-audio

#step 5 (add serial port for CAT control)
socat -d -d pty,raw,echo=0 pty,raw,echo=0 &


# step 7, installing tty0tty (it can be made persistent through reboots)
first, install the kernel headers
sudo apt install raspberrypi-kernel-headers

